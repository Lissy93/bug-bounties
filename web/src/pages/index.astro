---
import yaml from 'js-yaml';

import CompanyList from '../components/CompanyList.svelte';
import Hero from '../components/Hero.svelte';
import DefaultLayout from '../layouts/DefaultLayout.astro';

const fetchBountiesYAML = async () => {
  const response = await fetch('https://raw.githubusercontent.com/Lissy93/bug-bounties/main/bounties.yml');
  const text = await response.text();
  return yaml.load(text).companies;
};

const companies = await fetchBountiesYAML();

---

<DefaultLayout>
	<Hero />
  <CompanyList {companies} />
</DefaultLayout>
